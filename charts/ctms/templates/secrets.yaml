{{- if .Values.externalSecrets.enabled -}}
apiVersion: kubernetes-client.io/v1
kind: ExternalSecret
metadata:
  name: {{ include "ctms.fullname" . }}
spec:
  backendType: secretsManager
  dataFrom:
  - {{ .Values.externalSecrets.secretName }}
{{- else }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "ctms.fullname" . }}
data:
  # echo -n "postgres://ctms:defaultpassword@postgres:5432/ctms" | base64 -w 0
  DATABASE_URL: cG9zdGdyZXM6Ly9tZW50b3Jpbmc6ZGVmYXVsdHBhc3N3b3JkQHBvc3RncmVzOjU0MzIvbWVudG9yaW5n
  DJANGO_OIDC_RP_CLIENT_ID: ZmFrZQ==
  # echo -n "this-is-not-the-production-value" | base64
  DJANGO_SECRET_KEY: dGhpcy1pcy1ub3QtdGhlLXByb2R1Y3Rpb24tdmFsdWU=
  DJANGO_PAIR_ID_HASH_SECRET: dGhpcy1pcy1ub3QtdGhlLXByb2R1Y3Rpb24tdmFsdWU=
  DJANGO_OIDC_RP_CLIENT_SECRET: dGhpcy1pcy1ub3QtdGhlLXByb2R1Y3Rpb24tdmFsdWU=
{{- end }}

