{{- if .Values.externalSecret.create -}}
apiVersion: kubernetes-client.io/v1
kind: ExternalSecret
metadata:
  name: {{ include "mozmoderator.fullname" . }}
spec:
  backendType: secretsManager
  dataFrom:
  - /{{ .Values.environment }}/moderator
{{- else }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "mozmoderator.fullname" . }}
data:
  DATABASE_URL: bG9jYWxob3N0
  MOZILLIANS_API_APPNAME: bW9kZXJhdG9y
  MOZILLIANS_API_KEY: ZmFrZQ==
  OIDC_RP_CLIENT_ID: ZmFrZQ==
  OIDC_RP_CLIENT_SECRET: ZmFrZQ==
  SECRET_KEY: ZmFrZQ==
{{- end }}
